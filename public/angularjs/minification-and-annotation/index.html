<!DOCTYPE html>
<html lang="en">
  <head>
    <base href="http://bguiz.github.io/js-standards">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="http://bguiz.github.io/js-standards/favicon.ico" type="image/x-icon" />

    <title>AngularJs Minification and Annotation</title>

    <link href="http://bguiz.github.io/js-standards/css/bootstrap-theme.css" rel="stylesheet">
    <link href="http://bguiz.github.io/js-standards/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="http://bguiz.github.io/js-standards/css/style.css" rel="stylesheet">
    <link href="http://bguiz.github.io/js-standards/css/style-responsive.css" rel="stylesheet" />
    <link href="http://bguiz.github.io/js-standards/css/monokai_sublime.css" rel="stylesheet" />

  </head>

  <body>
  
  <section id="container" class="">

      
      <header class="header black-bg">
            <div class="toggle-nav">
                <i class="fa fa-bars"></i>
                <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
            </div>

            
            <a href="http://bguiz.github.io/js-standards/" class="logo"><img src="http://bguiz.github.io/js-standards/img/logo.png" style="height:40px;"></a>
            
            <div class="top-nav notification-row">
                
                <div class="hidden-xs nav-github pull-right">
                    <span rel="show-github" data-user="bguiz" data-repo="js-standards" data-type="follow"></span>
                    <span rel="show-github" data-user="bguiz" data-repo="js-standards"></span>
                    <span rel="show-github" data-user="bguiz" data-repo="js-standards" data-type="fork"></span>
                </div>
            </div>

            <div class="nav title-row" id="top_menu">
                <h1 class="nav top-menu"> AngularJs Minification and Annotation </h1>
            </div>
      </header>
      

      
<aside>
    <div id="sidebar"  class="nav-collapse ">
        
        <ul class="sidebar-menu">
          
          
            
              <li class="sub-menu">
                <a href="javascript:;" class="">
                    
                    <span>Getting Started</span>
                    <span class="menu-arrow fa fa-angle-right"></span>
                </a>
                <ul class="sub">
                    
                    <li><a href="http://bguiz.github.io/js-standards/intro/"> Intro </a> </li>
                    
                </ul>
            
              </li>
          
            
              <li class="sub-menu">
                <a href="javascript:;" class="">
                    
                    <span>Javascript</span>
                    <span class="menu-arrow fa fa-angle-right"></span>
                </a>
                <ul class="sub">
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/comments/"> Comments (JS) </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/files/"> Files </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/hoisting/"> Hoisting </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/functions/"> Functions </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/naming/"> Naming (JS) </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/control/"> Control </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/equality/"> Strict Equality </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/types/"> Types </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/lint/"> Linting </a> </li>
                    
                </ul>
            
              </li>
          
            
              <li class="sub-menu active">
                <a href="javascript:;" class="">
                    
                    <span>AngularJs</span>
                    <span class="menu-arrow fa fa-angle-down"></span>
                </a>
                <ul class="sub open">
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/single-responsibility/"> Single Responsibility </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/iife/"> IIFE </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/modules/"> Modules </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/controllers/"> Controllers </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/services/"> Services </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/factories/"> Factories </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/data-services/"> Data Services </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/directives/"> Directives </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/resolving-promises-for-a-controller/"> Resolving Promises for a Controller </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/manual-annotating-for-dependency-injection/"> Manual Annotating for Dependency Injection </a> </li>
                    
                    <li class="active"><a href="http://bguiz.github.io/js-standards/angularjs/minification-and-annotation/"> Minification and Annotation </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/exception-handling/"> Exception Handling </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/naming/"> Naming </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/application-structure-lift-principle/"> Application Structure LIFT Principle </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/application-structure/"> Application Structure </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/modularity/"> Modularity </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/startup-logic/"> Startup Logic </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/angular-wrapper-services/"> Angular $ Wrapper Services </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/testing/"> Testing </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/animations/"> Animations </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/comments/"> Comments </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/constants/"> Constants </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/file-templates-and-snippets/"> File Templates and Snippets </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/yeoman-generator/"> Yeoman Generator </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/routing/"> Routing </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/task-automation/"> Task Automation </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/angularjs-docs/"> AngularJS docs </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/folder-structure/"> Angular Folder Structure </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/credit/"> Credits </a> </li>
                    
                </ul>
            
              </li>
          
            <li> 
                <a href="https://github.com/bguiz/js-standards/issues" target="blank">
                    <i class='fa fa-life-ring'></i>Issues &amp; Help
                </a> 
            </li>
            
                <li>
                    <a href="https://github.com/bguiz/js-standards/edit/master/content/angularjs/minification-and-annotation.md" target="blank">
                        <i class='fa fa-edit'></i> Refine this Page
                    </a> 
                </li>
            
        </ul>
        
    </div>
</aside>



      
      <section id="main-content">
          <section class="wrapper">

              <div class="row">
                  <div class="row-nav-prev col-md-1">
                      <a class="navigation prev" href="http://bguiz.github.io/js-standards/angularjs/manual-annotating-for-dependency-injection">
                      <i class="fa fa-angle-left"></i>
                      </a>
                  </div>
                <div class="row-content col-md-10">
                    <section class="panel">
                    <div class="panel-body">



<h2 id="minification-and-annotation:5013387ba4e246539fabf170763b5f2e">Minification and Annotation</h2>

<h3 id="ng-annotate:5013387ba4e246539fabf170763b5f2e">ng-annotate</h3>

<h6 id="style-y100-style-y100:5013387ba4e246539fabf170763b5f2e">[Style <a href="#style-y100">Y100</a>]</h6>

<ul>
<li><p>Use <a href="https://github.com/olov/ng-annotate">ng-annotate</a> for <a href="http://gulpjs.com">Gulp</a> or <a href="http://gruntjs.com">Grunt</a> and comment functions that need automated dependency injection using <code>/** @ngInject */</code></p>

<p><em>Why?</em>: This safeguards your code from any dependencies that may not be using minification-safe practices.</p>

<p><em>Why?</em>: <a href="https://github.com/btford/ngmin"><code>ng-min</code></a> is deprecated</p>

<blockquote>
<p>I prefer Gulp as I feel it is easier to write, to read, and to debug.</p>
</blockquote>

<p>The following code is not using minification safe dependencies.</p>

<pre><code class="language-javascript">angular
    .module('app')
    .controller('Avengers', Avengers);


/* @ngInject */
function Avengers(storageService, avengerService) {
    var vm = this;
    vm.heroSearch = '';
    vm.storeHero = storeHero;


    function storeHero() {
        var hero = avengerService.find(vm.heroSearch);
        storageService.save(hero.name, hero);
    }
}
</code></pre>

<p>When the above code is run through ng-annotate it will produce the following output with the <code>$inject</code> annotation and become minification-safe.</p>

<pre><code class="language-javascript">angular
    .module('app')
    .controller('Avengers', Avengers);


/* @ngInject */
function Avengers(storageService, avengerService) {
    var vm = this;
    vm.heroSearch = '';
    vm.storeHero = storeHero;


    function storeHero() {
        var hero = avengerService.find(vm.heroSearch);
        storageService.save(hero.name, hero);
    }
}


Avengers.$inject = ['storageService', 'avengerService'];
</code></pre>

<p>Note: If <code>ng-annotate</code> detects injection has already been made (e.g. <code>@ngInject</code> was detected), it will not duplicate the <code>$inject</code> code.</p>

<p>Note: When using a route resolver you can prefix the resolver&rsquo;s function with <code>/* @ngInject */</code> and it will produce properly annotated code, keeping any injected dependencies minification safe.</p>

<pre><code class="language-javascript">// Using @ngInject annotations
function config($routeProvider) {
    $routeProvider
        .when('/avengers', {
            templateUrl: 'avengers.html',
            controller: 'Avengers',
            controllerAs: 'vm',
            resolve: { /* @ngInject */
                moviesPrepService: function(movieService) {
                    return movieService.getMovies();
                }
            }
        });
}
</code></pre>

<blockquote>
<p>Note: Starting from AngularJS 1.3 use the <a href="https://docs.angularjs.org/api/ng/directive/ngApp"><code>ngApp</code></a> directive&rsquo;s <code>ngStrictDi</code> parameter. When present the injector will be created in &ldquo;strict-di&rdquo; mode causing the application to fail to invoke functions which do not use explicit function annotation (these may not be minification safe). Debugging info will be logged to the console to help track down the offending code.
<code>&lt;body ng-app=&quot;APP&quot; ng-strict-di&gt;</code></p>
</blockquote></li>
</ul>

<h3 id="use-gulp-or-grunt-for-ng-annotate:5013387ba4e246539fabf170763b5f2e">Use Gulp or Grunt for ng-annotate</h3>

<h6 id="style-y101-style-y101:5013387ba4e246539fabf170763b5f2e">[Style <a href="#style-y101">Y101</a>]</h6>

<ul>
<li><p>Use <a href="https://www.npmjs.org/package/gulp-ng-annotate">gulp-ng-annotate</a> or <a href="https://www.npmjs.org/package/grunt-ng-annotate">grunt-ng-annotate</a> in an automated build task. Inject <code>/* @ngInject */</code> prior to any function that has dependencies.</p>

<p><em>Why?</em>: ng-annotate will catch most dependencies, but it sometimes requires hints using the <code>/* @ngInject */</code> syntax.</p>

<p>The following code is an example of a gulp task using ngAnnotate</p>

<pre><code class="language-javascript">gulp.task('js', ['jshint'], function() {
    var source = pkg.paths.js;
    return gulp.src(source)
        .pipe(sourcemaps.init())
        .pipe(concat('all.min.js', {newLine: ';'}))
        // Annotate before uglify so the code get's min'd properly.
        .pipe(ngAnnotate({
            // true helps add where @ngInject is not used. It infers.
            // Doesn't work with resolve, so we must be explicit there
            add: true
        }))
        .pipe(bytediff.start())
        .pipe(uglify({mangle: true}))
        .pipe(bytediff.stop())
        .pipe(sourcemaps.write('./'))
        .pipe(gulp.dest(pkg.paths.dev));
});


</code></pre></li>
</ul>

                    </div> 
                    </section> 
                </div> 
                <div class="row-nav-next col-md-1">
                    <a class="navigation prev" href="http://bguiz.github.io/js-standards/angularjs/exception-handling">
                    <i class="fa fa-angle-right"></i>
                    </a>
                </div>
              </div>
              
          </section>
      </section>
     
  </section>
  
    <script src="http://bguiz.github.io/js-standards/js/jquery-2.1.1.min.js"></script>
    <script src="http://bguiz.github.io/js-standards/js/jquery.scrollTo.min.js"></script>
    <script src="http://bguiz.github.io/js-standards/js/bootstrap.min.js"></script>
    <script src="http://bguiz.github.io/js-standards/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="http://bguiz.github.io/js-standards/js/scripts.js"></script>
    <script async defer id="github-bjs" src="http://bguiz.github.io/js-standards/js/buttons.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37884921-1', 'bguiz.com');
  ga('send', 'pageview');

</script>

  </body>
</html>

