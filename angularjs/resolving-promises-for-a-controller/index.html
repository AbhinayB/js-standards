<!DOCTYPE html>
<html lang="en">
  <head>
    <base href="http://bguiz.github.io/js-standards/">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="http://bguiz.github.io/js-standards//favicon.ico" type="image/x-icon" />

    <title>AngularJs Resolving Promises for a Controller</title>

    <link href="http://bguiz.github.io/js-standards//css/bootstrap-theme.css" rel="stylesheet">
    <link href="http://bguiz.github.io/js-standards//assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="http://bguiz.github.io/js-standards//css/style.css" rel="stylesheet">
    <link href="http://bguiz.github.io/js-standards//css/style-responsive.css" rel="stylesheet" />
    <link href="http://bguiz.github.io/js-standards//css/monokai_sublime.css" rel="stylesheet" />

  </head>

  <body>
  
  <section id="container" class="">

      
      <header class="header black-bg">
            <div class="toggle-nav">
                <i class="fa fa-bars"></i>
                <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
            </div>

            
            <a href="http://bguiz.github.io/js-standards/" class="logo"><img src="http://bguiz.github.io/js-standards/img/logo.png" style="height:40px;"></a>
            
            <div class="top-nav notification-row">
                
                <div class="hidden-xs nav-github pull-right">
                    <span rel="show-github" data-user="bguiz" data-repo="js-standards" data-type="follow"></span>
                    <span rel="show-github" data-user="bguiz" data-repo="js-standards"></span>
                    <span rel="show-github" data-user="bguiz" data-repo="js-standards" data-type="fork"></span>
                </div>
            </div>

            <div class="nav title-row" id="top_menu">
                <h1 class="nav top-menu"> AngularJs Resolving Promises for a Controller </h1>
            </div>
      </header>
      

      
<aside>
    <div id="sidebar"  class="nav-collapse ">
        
        <ul class="sidebar-menu">
          
          
            
              <li class="sub-menu">
                <a href="javascript:;" class="">
                    
                    <span>Getting Started</span>
                    <span class="menu-arrow fa fa-angle-right"></span>
                </a>
                <ul class="sub">
                    
                    <li><a href="http://bguiz.github.io/js-standards/intro"> Intro </a> </li>
                    
                </ul>
            
              </li>
          
            
              <li class="sub-menu">
                <a href="javascript:;" class="">
                    
                    <span>Javascript</span>
                    <span class="menu-arrow fa fa-angle-right"></span>
                </a>
                <ul class="sub">
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/comments"> Comments (JS) </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/files"> Files </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/hoisting"> Hoisting </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/functions"> Functions </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/naming"> Naming </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/control"> Control </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/equality"> Equality </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/types"> Types </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/es5/lint"> Linting </a> </li>
                    
                </ul>
            
              </li>
          
            
              <li class="sub-menu active">
                <a href="javascript:;" class="">
                    
                    <span>AngularJs</span>
                    <span class="menu-arrow fa fa-angle-down"></span>
                </a>
                <ul class="sub open">
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/single-responsibility"> Single Responsibility </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/iife"> IIFE </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/modules"> Modules </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/controllers"> Controllers </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/services"> Services </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/factories"> Factories </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/data-services"> Data Services </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/directives"> Directives </a> </li>
                    
                    <li class="active"><a href="http://bguiz.github.io/js-standards/angularjs/resolving-promises-for-a-controller"> Resolving Promises for a Controller </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/manual-annotating-for-dependency-injection"> Manual Annotating for Dependency Injection </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/minification-and-annotation"> Minification and Annotation </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/exception-handling"> Exception Handling </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/naming"> Naming </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/application-structure-lift-principle"> Application Structure LIFT Principle </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/application-structure"> Application Structure </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/modularity"> Modularity </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/startup-logic"> Startup Logic </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/angular-wrapper-services"> Angular $ Wrapper Services </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/testing"> Testing </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/animations"> Animations </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/comments"> Comments </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/constants"> Constants </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/file-templates-and-snippets"> File Templates and Snippets </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/yeoman-generator"> Yeoman Generator </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/routing"> Routing </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/task-automation"> Task Automation </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/angularjs-docs"> AngularJS docs </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/folder-structure"> Angular Folder Structure </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/logging"> Logging </a> </li>
                    
                    <li><a href="http://bguiz.github.io/js-standards/angularjs/credit"> Credits </a> </li>
                    
                </ul>
            
              </li>
          
            <li>
                <a href="https://github.com/bguiz/js-standards/issues" target="blank">
                    <i class='fa fa-life-ring'></i> Issues
                </a>
            </li>
            
                <li>
                    <a href="http://bguiz.github.io/js-standards/angularjs/" target="blank">
                        <i class='fa fa-edit'></i> Edit
                    </a>
                </li>
            
        </ul>
        
    </div>
</aside>



      
      <section id="main-content">
          <section class="wrapper">

              <div class="row">
                  <div class="row-nav-prev col-md-1">
                      <a class="navigation prev" href="http://bguiz.github.io/js-standards/angularjs/directives">
                      <i class="fa fa-angle-left"></i>
                      </a>
                  </div>
                <div class="row-content col-md-10">
                    <section class="panel">
                    <div class="panel-body">



<h2 id="resolving-promises-for-a-controller:6acf9722f6fb9433d34f04902026e052">Resolving Promises for a Controller</h2>

<h3 id="controller-activation-promises:6acf9722f6fb9433d34f04902026e052">Controller Activation Promises</h3>

<h6 id="style-y080-style-y080:6acf9722f6fb9433d34f04902026e052">[Style <a href="#style-y080">Y080</a>]</h6>

<ul>
<li><p>Resolve start-up logic for a controller in an <code>activate</code> function.</p>

<p><em>Why?</em>: Placing start-up logic in a consistent place in the controller makes it easier to locate, more consistent to test, and helps avoid spreading out the activation logic across the controller.</p>

<p><em>Why?</em>: The controller <code>activate</code> makes it convenient to re-use the logic for a refresh for the controller/View, keeps the logic together, gets the user to the View faster, makes animations easy on the <code>ng-view</code> or <code>ui-view</code>, and feels snappier to the user.</p>

<p>Note: If you need to conditionally cancel the route before you start use the controller, use a <a href="#style-y081">route resolve</a> instead.</p></li>
</ul>

<pre><code class="language-javascript">  /* avoid */
  function Avengers(dataservice) {
      var vm = this;
      vm.avengers = [];
      vm.title = 'Avengers';

      dataservice.getAvengers().then(function(data) {
          vm.avengers = data;
          return vm.avengers;
      });
  }
</code></pre>

<pre><code class="language-javascript">  /* recommended */
  function Avengers(dataservice) {
      var vm = this;
      vm.avengers = [];
      vm.title = 'Avengers';

      activate();

      ////////////

      function activate() {
          return dataservice.getAvengers().then(function(data) {
              vm.avengers = data;
              return vm.avengers;
          });
      }
  }
</code></pre>

<h3 id="route-resolve-promises:6acf9722f6fb9433d34f04902026e052">Route Resolve Promises</h3>

<h6 id="style-y081-style-y081:6acf9722f6fb9433d34f04902026e052">[Style <a href="#style-y081">Y081</a>]</h6>

<ul>
<li><p>When a controller depends on a promise to be resolved before the controller is activated, resolve those dependencies in the <code>$routeProvider</code> before the controller logic is executed. If you need to conditionally cancel a route before the controller is activated, use a route resolver.</p></li>

<li><p>Use a route resolve when you want to decide to cancel the route before ever transitioning to the View.</p>

<p><em>Why?</em>: A controller may require data before it loads. That data may come from a promise via a custom factory or <a href="https://docs.angularjs.org/api/ng/service/$http">$http</a>. Using a <a href="https://docs.angularjs.org/api/ngRoute/provider/$routeProvider">route resolve</a> allows the promise to resolve before the controller logic executes, so it might take action based on that data from the promise.</p>

<p><em>Why?</em>: The code executes after the route and in the controller’s activate function. The View starts to load right away. Data binding kicks in when the activate promise resolves. A “busy” animation can be shown during the view transition (via ng-view or ui-view)</p>

<p>Note: The code executes before the route via a promise. Rejecting the promise cancels the route. Resolve makes the new view wait for the route to resolve. A “busy” animation can be shown before the resolve and through the view transition. If you want to get to the View faster and do not require a checkpoint to decide if you can get to the View, consider the <a href="#style-y080">controller <code>activate</code> technique</a> instead.</p></li>
</ul>

<pre><code class="language-javascript">  /* avoid */
  angular
      .module('app')
      .controller('Avengers', Avengers);

  function Avengers(movieService) {
      var vm = this;
      // unresolved
      vm.movies;
      // resolved asynchronously
      movieService.getMovies().then(function(response) {
          vm.movies = response.movies;
      });
  }
</code></pre>

<pre><code class="language-javascript">  /* better */

  // route-config.js
  angular
      .module('app')
      .config(config);

  function config($routeProvider) {
      $routeProvider
          .when('/avengers', {
              templateUrl: 'avengers.html',
              controller: 'Avengers',
              controllerAs: 'vm',
              resolve: {
                  moviesPrepService: function(movieService) {
                      return movieService.getMovies();
                  }
              }
          });
  }

  // avengers.js
  angular
      .module('app')
      .controller('Avengers', Avengers);

  Avengers.$inject = ['moviesPrepService'];
  function Avengers(moviesPrepService) {
        var vm = this;
        vm.movies = moviesPrepService.movies;
  }
</code></pre>

<pre><code>Note: The example below shows the route resolve points to a named function, which is easier to debug and easier to handle dependency injection.
</code></pre>

<pre><code class="language-javascript">  /* even better */

  // route-config.js
  angular
      .module('app')
      .config(config);

  function config($routeProvider) {
      $routeProvider
          .when('/avengers', {
              templateUrl: 'avengers.html',
              controller: 'Avengers',
              controllerAs: 'vm',
              resolve: {
                  moviesPrepService: moviesPrepService
              }
          });
  }

  function moviePrepService(movieService) {
      return movieService.getMovies();
  }

  // avengers.js
  angular
      .module('app')
      .controller('Avengers', Avengers);

  Avengers.$inject = ['moviesPrepService'];
  function Avengers(moviesPrepService) {
        var vm = this;
        vm.movies = moviesPrepService.movies;
  }
</code></pre>

<pre><code>Note: The code example's dependency on `movieService` is not minification safe on its own. For details on how to make this code minification safe, see the sections on [dependency injection](#manual-annotating-for-dependency-injection) and on [minification and annotation](#minification-and-annotation).
</code></pre>

                    </div> 
                    </section> 
                </div> 
                <div class="row-nav-next col-md-1">
                    <a class="navigation prev" href="http://bguiz.github.io/js-standards/angularjs/manual-annotating-for-dependency-injection">
                    <i class="fa fa-angle-right"></i>
                    </a>
                </div>
              </div>
              
          </section>
      </section>
     
  </section>
  
    <script src="http://bguiz.github.io/js-standards/js/jquery-2.1.1.min.js"></script>
    <script src="http://bguiz.github.io/js-standards/js/jquery.scrollTo.min.js"></script>
    <script src="http://bguiz.github.io/js-standards/js/bootstrap.min.js"></script>
    <script src="http://bguiz.github.io/js-standards/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="http://bguiz.github.io/js-standards/js/scripts.js"></script>
    <script async defer id="github-bjs" src="http://bguiz.github.io/js-standards/js/buttons.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37884921-1', 'bguiz.com');
  ga('send', 'pageview');

</script>

  </body>
</html>

